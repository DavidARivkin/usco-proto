<script src="EdgeShader3.js"></script>

<polymer-element name="edgeDetect-pass" extends="three-post-fx" attributes="">
  <script>Polymer('edgeDetect-pass',{
    name: 'edgeDetect-pass',
    effect: null,
    width :  1368*2,//window.innerWidth || 640,
    height:  768*2,//window.innerHeight || 480,
    observe: {
       width: 'uniformsChanged',
       height: 'uniformsChanged'
    },
    ready: function()
    {
      this.effect = new THREE.ShaderPass(THREE.EdgeShader3);
      this.effect.uniforms[ 'aspect' ].value = new THREE.Vector2( this.width, this.height );

    },
    enteredView:function()
    {
      this.super();
      
       window.onresize = this.onResize.bind(this);
    },
    onResize:function(event)
    {
      this.width = window.innerWidth*1;
      this.height = window.innerHeight*1;
      console.log("resized", this.width, this.height);
            //this.effect.uniforms[ 'aspect' ].value = new THREE.Vector2( this.width, this.height );
    },
    uniformsChanged:function()
    {
      this.effect.uniforms[ 'aspect' ].value = new THREE.Vector2( this.width, this.height );
    },
  });
  </script>
</polymer-element>

